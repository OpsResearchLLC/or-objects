<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="DRA Systems">
   <meta name="GENERATOR" content="Mozilla/4.61 [en] (WinNT; I) [Netscape]">
   <title>OR-Objects Tutorial 3 - Elevator Simulation</title>
</head>
<body background="../../../Images/paper.gif" nosave>
&nbsp;
<table CELLSPACING=4 >
<tr>
<td><a href="http://OpsResearch.com" target="_parent">Home</a></td>

<td><a href="https://github.com/opsresearch/or-objects">OR-Objects</a></td>

<td><a href="../index.html">Tutorials</a></td>

<td><a href="../Tutorial_2/index.html">Prev</a></td>

<td><a href="../Tutorial_4/index.html">Next</a></td>
</tr>
</table>

<center>
<h1>
Tutorial 3 - Elevator Simulation</h1></center>

<center>
<p><br><applet ARCHIVE="../or.jar" CODE="Tutorial_3.class"  WIDTH=135 HEIGHT=271></applet></center>

<p>In this tutorial you will learn to use the exponential and empirical
distributions in OR-Objects to simulate passengers entering an elevator
system. For simplicity, some of the applet details will be skipped. If
you would like all the details then view the <a href="Tutorial_3.txt">complete
source</a>.
<p>
<hr WIDTH="100%">
<h2>
Initialize Arrival Distributions</h2>
The method 'initArrivals' initializes the distributions that are used to
generate passenger arrivals. The simulation uses an ExponentialDistribution
to generate arriving passengers with a mean time between arrivals of five
seconds. The passenger origin and destination floors are generated from
two EmpiricalDistributions, one to determine the origin floor and the other
to determine the destination floor. The distribution '_origDist', used
to generate origin floors, will start twice as many passengers from floors
zero and five than from the other floors. The distribution '_destDist',
used to generate destination floors, will send twice as many passengers
to floors zero and nine than to the other floors. Note that 'CPS' is a
constant equal to the number of simulation clock ticks per second of simulated
time..
<p><tt>&nbsp;&nbsp;&nbsp; <a href="../../api/drasys/or/prob/DistributionI.html" TARGET="API">DistributionI</a>
_arrivalDist;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; <a href="../../api/drasys/or/prob/DiscreteDistributionI.html" TARGET="API">DiscreteDistributionI</a>
_origDist;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; DiscreteDistributionI _destDist;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; .....</tt>
<br><tt>&nbsp;&nbsp;&nbsp; public void</tt>
<br><tt>&nbsp;&nbsp;&nbsp; initArrivals()</tt>
<br><tt>&nbsp;&nbsp;&nbsp; {</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int[] floors =&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
{0,1,2,3,4,5,6,7,8,9,10,11};</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double[] origProb =
{2,1,1,1,1,2,1,1,1,1, 1, 1};</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double[] destProb =
{2,1,1,1,1,1,1,1,1,2, 1, 1};</tt>
<p><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _arrivalDist = new <a href="../../api/drasys/or/prob/ExponentialDistribution.html#ExponentialDistribution(double)" TARGET="API">ExponentialDistribution</a>(5);</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _nextArrival = (int)(CPS
* _arrivalDist.<a href="../../api/drasys/or/prob/DistributionI.html#getRandomScaler()" TARGET="API">getRandomScaler</a>());</tt>
<p><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _origDist = new <a href="../../api/drasys/or/prob/EmpiricalDistribution.html" TARGET="API">EmpiricalDistribution</a>(floors,
new <a href="../../api/drasys/or/linear/DenseVector.html#DenseVector(double[])" TARGET="API">DenseVector</a>(origProb));</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _destDist = new EmpiricalDistribution(floors,
new DenseVector(destProb));</tt>
<br><tt>&nbsp;&nbsp;&nbsp; }</tt>
<p>
<hr WIDTH="100%">
<h2>
Generate Arriving Passengers</h2>
This method, 'checkArrivals', is called from the main simulation loop and
generates the arriving passengers. If it isn't time for the next arrival
the method simply returns. Otherwise; it sets up the time for the next
arrival and adds the new passenger. The origin floor is obtained from '_origDist'
and the destination is obtained from '_destDist'. The origin floor is used
directly from the distribution, but the destination floor is checked to
insure it is different from the origin floor. Destinations will be drawn
until one is obtained that is different from the origin.
<pre><tt>&nbsp;&nbsp;&nbsp; public void
&nbsp;&nbsp;&nbsp; checkArrivals(int time)
&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(time &lt; _nextArrival) return;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _nextArrival = (int)(time + CPS * _arrivalDist.<a href="../../api/drasys/or/prob/DistributionI.html#getRandomScaler()" TARGET="API">getRandomScaler</a>());

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int orig = _origDist.<a href="../../api/drasys/or/prob/DiscreteDistributionI.html#getRandomInteger()" TARGET="API">getRandomInteger</a>();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int dest = _destDist.getRandomInteger();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while(dest == orig) dest = _destDist.getRandomInteger();

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; arrival(new Passenger(orig, dest));
&nbsp;&nbsp;&nbsp; }</tt></pre>
For the sake of expediency the assignment algorithm used in this tutorial
is very simplistic. To make it otherwise would require a lot of work that
would not significantly enhance the effectiveness of the tutorial.
<br>
<hr SIZE=5 WIDTH="100%">


<pre><a href="../copyright.html">Copyright (C) 1997-2000 by DRA Systems all rights reserved.</a>&nbsp;<img SRC="../../../cgi/log.cgi?O-Tutorial-3" NOSAVE height=1 width=1></pre>
&nbsp;
<p>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
</body>
</html>
