<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="DRA Systems">
   <meta name="GENERATOR" content="Mozilla/4.61 [en] (WinNT; I) [Netscape]">
   <title>OR-Objects Tutorial 5</title>
</head>
<body background="../../../Images/paper.gif" nosave>
&nbsp;
<table CELLSPACING=4 >
<tr>
<td><a href="http://OpsResearch.com" target="_parent">Home</a></td>

<td><a href="https://github.com/opsresearch/or-objects">OR-Objects</a></td>

<td><a href="../index.html">Tutorials</a></td>

<td><a href="../Tutorial_4/index.html">Prev</a></td>

<td><a href="../Tutorial_6/index.html">Next</a></td>
</tr>
</table>

<center>
<h1>
Tutorial 5 - Route Simulation</h1></center>

<center>
<p><br><applet ARCHIVE="../or.jar" CODE="Tutorial_5.class"  WIDTH=250 HEIGHT=380>[If Java were enabled you would see an applet here.]</applet></center>

<p>In this tutorial you will use the street network that was introduced
in
<a href="../Tutorial_2/index.html" target="_parent">Tutorial-2</a> to
simulate a service route. A single vehicle is located at the depot and
each day it must visit all the customers that demand service. The customers
that need service vary randomly and are known at the start of the day.
The simulation will determine the expected time the vehicle will spend
traveling to customers each day based on the average daily demand.
<p>The simulation&nbsp; uses a poisson distribution to randomly select
the number of customers that need service each day. Then a uniform distribution
is used to pick the actual customers to visit. The chosen customers are
selected in a traveling salesman algorithm which is then used to construct
the vehicle tour.&nbsp; Finally the tour is drawn on the map and displayed
in the message area.
<p><a href="../Tutorial_2/index.html" target="_parent">Tutorial-2</a> explained
the construction of the <a href="../Tutorial_2/index.html#streetNetwork">street
network</a> and how use a <a href="../Tutorial_2/index.html#algorithm">single
vertex shortest path algorithm</a>. This tutorial assumes you have read
and understand <a href="../Tutorial_2/index.html" target="_parent">Tutorial-2</a>&nbsp;
and will not repeat that information. For simplicity, some of the applet
details will be skipped. If you would like all the details then view the
<a href="Tutorial_5.txt">complete
source</a>.
<p>
<hr WIDTH="100%">
<h2>
Tutorial 5 - Contents</h2>

<ul>
<li>
Initialize</li>

<ul>
<li>
<a href="#initializeTravelGraph">Travel Graph</a></li>

<li>
<a href="#initializeDemandDistributions">Demand Distributions</a></li>
</ul>

<li>
Simulate</li>

<ul>
<li>
<a href="#simulateOneDay">One Day</a></li>

<li>
<a href="#simulateSingleStep">Single Step</a></li>

<li>
<a href="#simulateRun">Run</a></li>
</ul>

<li>
Show</li>

<ul>
<li>
<a href="#showTour">Tour</a></li>

<li>
<a href="#showPath">Path</a></li>
</ul>
</ul>

<hr SIZE=1 WIDTH="100%">
<h2>
<a NAME="initializeTravelGraph"></a>Initialize - Travel Graph</h2>
This simulation uses the all pairs shortest path algorithm '<a href="../../api/drasys/or/graph/sp/Iterate.html" TARGET="API">Iterate</a>'
to find the travel time between customers. 'Iterate' uses the single vertex
shortest path algorithm '<a href="../../api/drasys/or/graph/sp/Connections.html" TARGET="API">Connections</a>'
as a sub algorithm to find the shortest paths.. The method 'initTutorial'
constructs the street graph and both of the shortest path algorithms. It
then uses the '<a href="../../api/drasys/or/graph/sp/Iterate.html" TARGET="API">Iterate</a>'
algorithm to build a travel graph which contains the depot and all of the
customers along with time it takes to travel between them. Finally the
travel graph is used to construct the traveling salesman algorithm that
will be used to construct the vehicle route.
<pre><tt>&nbsp;&nbsp;&nbsp; <a href="../../api/drasys/or/graph/tsp/ConstructI.html" TARGET="API">ConstructI</a>&nbsp; tsp;
&nbsp;&nbsp;&nbsp; <a href="../../api/drasys/or/graph/SparseGraph.html" TARGET="API">SparseGraph</a>&nbsp; graph;
&nbsp;&nbsp;&nbsp; <a href="../../api/drasys/or/graph/sp/SingleVertexI.html" TARGET="API">SingleVertexI</a> singleVertexAlgorithm;</tt></pre>

<pre><tt>&nbsp;&nbsp;&nbsp; .........</tt></pre>

<pre><tt>&nbsp;&nbsp;&nbsp; public void
&nbsp;&nbsp;&nbsp; initTutorial()
&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; graph = new <a href="../../api/drasys/or/graph/SparseGraph.html" TARGET="API">SparseGraph</a>();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; image = this.getImage(this.getDocumentBase(), "Tutorial_5.gif");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="../Tutorial_2/index.html#buildGraph">buildGraph</a>();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; singleVertexAlgorithm = new <a href="../../api/drasys/or/graph/sp/Connections.html" TARGET="API">Connections</a>(graph);</tt></pre>
The string array 'keys' contains the keys of the vertices that are included
in the travel graph. The next four lines create the 'Iterate' algorithm,
set the shortest path properties and clear all origin and destination vertices.
The 'for' loop selects the depot and all of the customers to be both origins
and destinations in the travel graph.
<pre><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String[] keys = {"A","B","C","D","E","F","G","H","I","J","Depot"};
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="../../api/drasys/or/graph/sp/AllPairsI.html" TARGET="API">AllPairsI</a> allPairsAlgorithm = new <a href="../../api/drasys/or/graph/sp/Iterate.html" TARGET="API">Iterate</a>(graph, singleVertexAlgorithm);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; allPairsAlgorithm.<a href="../../api/drasys/or/graph/sp/AllPairsI.html#setProperties(drasys.or.graph.sp.PropertiesI)" TARGET="API">setProperties</a>(new <a href="../Tutorial_2/index.html#classesProperties">Properties</a>());
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; allPairsAlgorithm.<a href="../../api/drasys/or/graph/sp/AllPairsI.html#setOrigin(boolean)" TARGET="API">setOrigin</a>(false);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; allPairsAlgorithm.<a href="../../api/drasys/or/graph/sp/AllPairsI.html#setDestination(boolean)" TARGET="API">setDestination</a>(false);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(int i=0; i&lt;keys.length; i++){
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; allPairsAlgorithm.<a href="../../api/drasys/or/graph/sp/AllPairsI.html#setOrigin(java.lang.Object, boolean)" TARGET="API">setOrigin</a>(keys[i], true);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; allPairsAlgorithm.<a href="../../api/drasys/or/graph/sp/AllPairsI.html#setDestination(java.lang.Object, boolean)" TARGET="API">setDestination</a>(keys[i], true);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</tt></pre>
The next two lines build the travel graph and construct the traveling salesman
algorithm that will use it. The graph returned from <a href="../../api/drasys/or/graph/sp/AllPairsI.html#generateGraph()" TARGET="API">generateGraph</a>
is an instance of a '<a href="../../api/drasys/or/graph/MatrixGraph.html" TARGET="API">MatrixGraph</a>'
which can be viewed as a matrix where, the origin vertices are associated
with the rows, the destination vertices are associated with the columns
and the matrix elements contain the travel times. 'MatrixGraph' is optimized
for this purpose and is very efficient if the edges are retrieved with
<a href="../../api/drasys/or/graph/GraphI.html#getMutableEdge(drasys.or.graph.VertexI, drasys.or.graph.VertexI, java.lang.Object)" TARGET="API">mutable</a>
methods and '<a href="../../api/drasys/or/DoubleI.html#doubleValue()" TARGET="API">doubleValue</a>'
is used to get the edge values.
<pre><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="../../api/drasys/or/graph/AddI.html">AddI</a> travelGraph = new <a href="../../api/drasys/or/graph/SparseGraph.html#SparseGraph()">SparseGraph</a>();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; allPairsAlgorithm.<a href="../../api/drasys/or/graph/sp/AllPairsI.html#fillGraph(drasys.or.graph.AddI)">fillGraph</a>(travelGraph);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tsp = new <a href="../../api/drasys/or/graph/tsp/FullEnumeration.html#FullEnumeration(drasys.or.graph.GraphI)" TARGET="API">FullEnumeration</a>(travelGraph);

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; reset(3,5);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch(VertexNotFoundException e){}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch(InvalidPropertyException e){}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch(DuplicateEdgeException e){}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch(DuplicateVertexException e){}
&nbsp;&nbsp;&nbsp; }</tt></pre>

<hr SIZE=1 WIDTH="100%">
<h2>
<a NAME="initializeDemandDistributions"></a>Initialize - Demand Distributions</h2>
The 'reset' method is called to reset the simulation and to update the
simulation parameters. In addition to resetting all of the simulation variables,
it initializes the demand distributions.
<p>The poisson distribution is a single parameter discrete distribution
that represents the probability that N independent events will occur during
some time interval, the time interval for this simulation is one day. The
single parameter is the mean number of events expected for the day and
is contained in the variable 'numberVisited'.
<p>The discrete uniform distribution used here represents a set of equally
spaced integers where all the integers have the same probability of selection.
The set is defined by three parameters, the least integer in the set, the
increment between adjacent elements and the number of elements in the set.
The parameters are set to (0,1,10) so that each integer in the set will
correspond to exactly one customer.
<pre><tt>&nbsp;&nbsp;&nbsp; <a href="../../api/drasys/or/prob/DiscreteDistributionI.html" TARGET="API">DiscreteDistributionI</a> poisson, uniform;</tt></pre>

<pre><tt>&nbsp;&nbsp;&nbsp; ........</tt></pre>

<pre><tt>&nbsp;&nbsp;&nbsp; public void
&nbsp;&nbsp;&nbsp; reset(int nVisited, int nDays)
&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tour = null;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dayCount = 0;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; totalTime = 0.0;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; currentTime = 0.0;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; numberVisited = nVisited;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; numberDays = nDays;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; poisson = new <a href="../../api/drasys/or/prob/PoissonDistribution.html#PoissonDistribution(double)" TARGET="API">PoissonDistribution</a>(numberVisited);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; uniform = new <a href="../../api/drasys/or/prob/DiscreteUniformDistribution.html#DiscreteUniformDistribution(int, int, int)" TARGET="API">DiscreteUniformDistribution</a>(0,1,10);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; update(this.getGraphics());
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tourLabel.setText("");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; showDist();
&nbsp;&nbsp;&nbsp; }</tt></pre>

<hr SIZE=1 WIDTH="100%">
<h2>
<a NAME="simulateOneDay"></a>Simulate - One Day</h2>
This&nbsp; main section of the simulation constructs the vehicle tour.
The boolean array 'used' identifies customers that have been selected.
The string array 'customers' contains the customer keys used to identify
the customer vertices in the travel graph. The next two lines select the
depot as the only selected vertex.
<pre><tt>&nbsp;&nbsp; public void
&nbsp;&nbsp;&nbsp; simulateOneDay()
&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; boolean[] used = new boolean[10];
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String[] customers = {"A","B","C","D","E","F","G","H","I","J"};

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tsp.<a href="../../api/drasys/or/graph/tsp/ConstructI.html#selectVertex(boolean)" TARGET="API">selectVertex</a>(false);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tsp.<a href="../../api/drasys/or/graph/tsp/ConstructI.html#selectVertex(java.lang.Object, boolean)" TARGET="API">selectVertex</a>("Depot", true);</tt></pre>
This next section gets the number of customers to visit from the poisson
distribution and then randomly selects that number of customers using the
uniform distribution. All customers have the same probability of selection
and the while loop assures that no customer is selected more than once.
<pre><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int n = poisson.<a href="../../api/drasys/or/prob/PoissonDistribution.html#getRandomInteger()" TARGET="API">getRandomInteger</a>();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(n &lt; 1) n = 1;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(n > 8) n = 8;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(int i=0; i&lt;n; i++){
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int idx = uniform.<a href="../../api/drasys/or/prob/UniformDistribution.html#getRandomScaler()" TARGET="API">getRandomScaler</a>();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while(used[idx]) idx = uniform.getRandomInteger();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; used[idx] = true;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String customer = customers[idx];
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tsp.<a href="../../api/drasys/or/graph/tsp/ConstructI.html#selectVertex(java.lang.Object, boolean)" TARGET="API">selectVertex</a>(customer, true);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</tt></pre>
After the customers are selected in the traveling salesman algorithm a
closed tour is constructed which repeats the first vertex at the end. Then
the tour is rotated so that the depot is the repeated vertex and displays
on the ends of the tour message.
<pre><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; totalTime += currentTime = tsp.<a href="../../api/drasys/or/graph/tsp/ConstructI.html#constructClosedTour()" TARGET="API">constructClosedTour</a>();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tour = tsp.<a href="../../api/drasys/or/graph/tsp/TSPI.html#getTour()" TARGET="API">getTour</a>();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tour = tsp.<a href="../../api/drasys/or/graph/tsp/TSPI.html#rotateClosedTour(java.util.Vector, java.lang.Object)" TARGET="API">rotateClosedTour</a>(tour, "Depot");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; showTourBuffered(tour);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dayCount++;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch(<a href="../../api/drasys/or/graph/tsp/TourNotFoundException.html" TARGET="API">TourNotFoundException</a> e){}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch(<a href="../../api/drasys/or/graph/VertexNotFoundException.html" TARGET="API">VertexNotFoundException</a> e){}
&nbsp;&nbsp;&nbsp; }</tt></pre>

<hr SIZE=1 WIDTH="100%">
<h2>
<a NAME="simulateSingleStep"></a>Simulate - Single Step</h2>
The method 'singleStep' is called when the single step button is pressed.
It runs the simulation for an additional day by calling 'simulateOneDay'.
<pre><tt>&nbsp;&nbsp;&nbsp; public void
&nbsp;&nbsp;&nbsp; singleStep()
&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(dayCount >= numberDays) return;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#simulateOneDay">simulateOneDay</a>();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; showDist();
&nbsp;&nbsp;&nbsp; }</tt></pre>

<hr SIZE=1 WIDTH="100%">
<h2>
<a NAME="simulateRun"></a>Simulate - Run</h2>
The method 'run' is called when the run button is pressed. It runs the
simulation for the remaining days.
<pre>&nbsp;&nbsp;<tt>&nbsp; public void
&nbsp;&nbsp;&nbsp; run()
&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while(dayCount &lt; numberDays)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#simulateOneDay">simulateOneDay</a>();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; showDist();
&nbsp;&nbsp;&nbsp; }</tt></pre>

<hr SIZE=1 WIDTH="100%">
<h2>
<a NAME="showTour"></a>Show - Tour</h2>
The method 'showTour' draws the tour and displays the message that details
the customers on the tour. The while loop adds each customer to the message
string and calls 'showpath' to draw the travel path between adjacent customers.
<pre><tt>&nbsp;&nbsp; public void
&nbsp;&nbsp;&nbsp; showTour(Graphics g, Vector tour)
&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String str = "";
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; g.setColor(Color.white);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Enumeration e=tour.elements();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(!e.hasMoreElements()) return;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="../../api/drasys/or/graph/VertexI.html" TARGET="API">VertexI</a> from = (VertexI)e.nextElement();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; str += from.<a href="../../api/drasys/or/graph/VertexI.html#getKey()" TARGET="API">getKey</a>();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while(e.hasMoreElements()){
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.nextElement(); <font color="#006600">//Remove Edge
</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="../../api/drasys/or/graph/VertexI.html" TARGET="API">VertexI</a> to = (VertexI)e.nextElement();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; str += ", " + to.<a href="../../api/drasys/or/graph/VertexI.html#getKey()" TARGET="API">getKey</a>();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="#showPath">showPath</a>(g, from, to);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from = to;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tourLabel.setText(str);
&nbsp;&nbsp;&nbsp; }</tt></pre>

<hr SIZE=1 WIDTH="100%">
<h2>
<a NAME="showPath"></a>Show - Path</h2>
The method 'showPath' draws the travel path between two customers. It creates
the path between customers using the same sub algorithm that the 'Iterate'
algorithm used to create the travel graph. It then loops through the vertices
drawing the path. Notice that&nbsp; the vertex 'pathTo' is used to get
the path from the shortest path algorithm instead of just using the argument
'to'. The reason is that the argument 'to' is a vertex from the travel
graph, but the argument to 'pathElements' must be from the street graph
since it is the graph used by 'singleVertexAlgorithm'.
<pre><tt>&nbsp;&nbsp;&nbsp; public void
&nbsp;&nbsp;&nbsp; showPath(Graphics g, VertexI from, VertexI to)
&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; singleVertexAlgorithm.<a href="../../api/drasys/or/graph/sp/SingleVertexI.html#setCandidate(boolean)" TARGET="API">setCandidate</a>(false);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; singleVertexAlgorithm.<a href="../../api/drasys/or/graph/sp/SingleVertexI.html#setCandidate(java.lang.Object, boolean)" TARGET="API">setCandidate</a>(to.<a href="../../api/drasys/or/graph/VertexI.html#getKey()" TARGET="API">getKey</a>(), true);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; singleVertexAlgorithm.<a href="../../api/drasys/or/graph/sp/SingleVertexI.html#generatePathsFrom(java.lang.Object)" TARGET="API">generatePathsFrom</a>(from.getKey());
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="../../api/drasys/or/graph/VertexI.html" TARGET="API">VertexI</a> pathTo = singleVertexAlgorithm.<a href="../../api/drasys/or/graph/sp/SingleVertexI.html#getNearestCandidate()" TARGET="API">getNearestCandidate</a>();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Enumeration path = singleVertexAlgorithm.<a href="../../api/drasys/or/graph/sp/SingleVertexI.html#pathElements(drasys.or.graph.VertexI)" TARGET="API">pathElements</a>(pathTo);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="../../api/drasys/or/graph/VertexI.html" TARGET="API">VertexI</a> vertex = (VertexI)path.nextElement();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="../Tutorial_2/index.html#classesNode">Node</a> node1 = (Node)vertex.getValue();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while(path.hasMoreElements()){
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path.nextElement(); <font color="#006600">// Remove Edge
</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vertex&nbsp; = (VertexI)path.nextElement();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="../Tutorial_2/index.html#classesNode">Node</a> node2 = (Node)vertex.<a href="../../api/drasys/or/graph/VertexI.html#getValue()" TARGET="API">getValue</a>();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; g.drawLine(node1.x, node1.y, node2.x, node2.y);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; node1 = node2;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch(<a href="../../api/drasys/or/graph/VertexNotFoundException.html" TARGET="API">VertexNotFoundException</a> e){}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch(<a href="../../api/drasys/or/graph/sp/InvalidPropertyException.html" TARGET="API">InvalidPropertyException</a> e){}
&nbsp;&nbsp;&nbsp; }</tt></pre>

<hr SIZE=5 WIDTH="100%">

<font size=-1><a href="../copyright.html">Copyright (C) 1997-2000 by DRA
Systems all rights reserved.</a></font><img SRC="../../../cgi/log.cgi?O-Tutorial-5" NOSAVE height=1 width=1>
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
<br>&nbsp;
</body>
</html>
